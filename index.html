<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>LOGIN</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90vh;
            background-color: black;
        }
        .contain {
            width: 350px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        header {
            font-size: 30px;
            text-align: center;
            margin-bottom: 20px;
        }
        .input-container {
            position: relative;
            margin-bottom: 20px;
        }
        .input-container input {
            height: 45px;
            width: 100%;
            border-radius: 30px;
            padding-left: 45px;
            border: 1px solid #ccc;
        }
        .input-container i {
            display: flex;
            flex-direction: column;
            position: relative;
            top: 33px;
            left: 17px;
            color: #999;
        }
        .suivant {
            border: none;
            border-radius: 30px;
            font-size: 15px;
            height: 35px;
            outline: none;
            width: 100%;
            transition: .3s;
            cursor: pointer;
            background-color: #007bff;
            color: white;
        }
        .suivant:hover {
            background-color: #0056b3;
        }
        .social-buttons {
            display: flex;
            justify-content: space-between;
            gap: 5px;
            margin-top: 15px;
        }
        .social-buttons button {
            border: none;
            border-radius: 30px;
            font-size: 15px;
            height: 40px;
            outline: none;
            width: 33%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: .3s;
            color: white;
        }
        .google {
            background-color: #ea4335;
        }
        .linkedin {
            background-color: #0077b5;
        }
        .github {
            background-color: #24292e;
        }
        a {
            display: block;
            text-align: center;
            margin-top: 10px;
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
    <script>
         window.onload = function () { 
            document.getElementById('googleSignInBtn').addEventListener('click', function () {
                console.log("Bouton Google cliqué");
                let oauth2Endpoint = "https://accounts.google.com/o/oauth2/v2/auth";
                let params = {
                    client_id: "979191689501-bvbu1i0jk40evuiph5rnkhlrck16op5g.apps.googleusercontent.com",
                    redirect_uri: "http://127.0.0.1:5500/welcome.html",
                    response_type: "token",
                    scope: "https://www.googleapis.com/auth/userinfo.profile",
                    include_granted_scopes: 'true',
                    state: 'pass-through-value'
                };
                let urlParams = new URLSearchParams(params).toString();
                let authUrl = `${oauth2Endpoint}?${urlParams}`;
                let popup = window.open(authUrl, "popup", "width=600,height=600");

                window.addEventListener('message', function(event) {
                    if (event.origin === "http://127.0.0.1:5500") {
                        if (event.data.success) {
                            alert("Connexion réussie via Google!");
                        } else {
                            alert("Erreur de connexion via Google.");
                        }
                        popup.close();
                    }
                }, false);
            });

            document.getElementById('githubSignInBtn').addEventListener('click', function () {
                console.log("Bouton GitHub cliqué");
                const clientId = 'Iv23liYaE8qNS4fUc2qF';
                const redirectUri = 'http://127.0.0.1:5500/welcome.html';
                const authUrl = `https://github.com/login/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&scope=user`;
                let popup = window.open(authUrl, "popup", "width=600,height=600");

                window.addEventListener('message', function(event) {
                    if (event.origin === "http://127.0.0.1:5500") {
                        if (event.data.success) {
                            alert("Connexion réussie via GitHub!");
                        } else {
                            alert("Erreur de connexion via GitHub.");
                        }
                        popup.close();
                    }
                }, false);
            });

            document.getElementById('linkedinSignInBtn').addEventListener('click', function () {
                console.log("Bouton LinkedIn cliqué");
                const clientId = '78c6vz1h9qnde0';
                const redirectUri = 'http://127.0.0.1:5500/welcome.html';
                const authUrl = `https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${clientId}&redirect_uri=${redirectUri}&scope=r_liteprofile`;
                let popup = window.open(authUrl, "popup", "width=600,height=600");

                window.addEventListener('message', function(event) {
                    if (event.origin === "http://127.0.0.1:5500") {
                        if (event.data.success) {
                            alert("Connexion réussie via LinkedIn!");
                        } else {
                            alert("Erreur de connexion via LinkedIn.");
                        }
                        popup.close();
                    }
                }, false);
            });
        };
    </script>
</head>
<body>
    <form id="loginForm" action="welcome.html" method="POST">
        <div class="contain">
            <header>CONNEXION</header>
            <div class="input-container">
                <label for="username">Nom d'utilisateur</label>
                <i class="bi bi-person-fill"></i>
                <input type="text" id="username" name="nom_utilisateur" placeholder="Votre nom d'utilisateur" required>
            </div>
            <div class="input-container">
                <label for="password">Mot de passe</label>
                <i class="bi bi-key-fill"></i>
                <input type="password" id="password" name="mot_passe" class="form-control" placeholder="Mot de passe" required>
            </div>
            <div>
                <input type="submit" value="CONNEXION" class="suivant" name="suivant">
            </div>
            <hr>
            <fieldset>
                <legend>Continuer avec</legend>
                <div class="social-buttons">
                    <button type="button" id="googleSignInBtn" class="google">
                        <i class="bi bi-google"></i>
                    </button>
                    <button type="button" id="linkedinSignInBtn" class="linkedin">
                        <i class="bi bi-linkedin"></i>
                    </button>
                    <button type="button" id="githubSignInBtn" class="github">
                        <i class="bi bi-github"></i>
                    </button>
                </div>
            </fieldset>
            <a href="creer_un_compte.html">Créer un compte</a>
        </div>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
